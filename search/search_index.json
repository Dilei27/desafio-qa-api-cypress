{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Testes de API \u2013 Cypress","text":""},{"location":"#objetivo-do-projeto","title":"Objetivo do projeto","text":"<p>Automatizar a valida\u00e7\u00e3o da API p\u00fablica Dog CEO (<code>https://dog.ceo/api</code>), garantindo que os endpoints principais respondam com status, formatos e dados esperados. A su\u00edte roda localmente, em Docker e em pipeline GitHub Actions, gerando relat\u00f3rios Mochawesome.</p>"},{"location":"#o-que-e-validado-na-api-dog-ceo","title":"O que \u00e9 validado na API Dog CEO","text":"<ul> <li>Lista completa de ra\u00e7as em <code>/breeds/list/all</code> com c\u00f3digo 200 e corpo no formato esperado.</li> <li>Retorno de uma imagem aleat\u00f3ria em <code>/breeds/image/random</code>, assegurando URL v\u00e1lida.</li> <li>Lista de imagens de uma ra\u00e7a espec\u00edfica em <code>/breed/{breed}/images</code>, garantindo array de URLs.</li> <li>Tratamento para ra\u00e7a inexistente, retornando 404 e mensagem de erro adequada.</li> </ul>"},{"location":"#arquitetura-da-automacao","title":"Arquitetura da automa\u00e7\u00e3o","text":"<ul> <li>Cypress e2e: specs em <code>cypress/e2e/breeds/*.cy.js</code> organizadas por endpoint.</li> <li>Helper de API: <code>cypress/e2e/helpers/api.js</code> centraliza URLs e chamadas <code>cy.request</code>.</li> <li>Fixtures: <code>cypress/fixtures/breeds.json</code> com exemplos de ra\u00e7as v\u00e1lidas e inv\u00e1lidas.</li> <li>Support: <code>cypress/support/e2e.js</code> registra comandos futuros (mantido enxuto).</li> <li>Configura\u00e7\u00e3o: <code>cypress.config.js</code> define reporter Mochawesome, padr\u00f5es de spec e suporte.</li> <li>Infra: Dockerfile + docker-compose para execu\u00e7\u00e3o containerizada; GitHub Actions para CI.</li> </ul>"},{"location":"#tecnologias-utilizadas","title":"Tecnologias utilizadas","text":"<ul> <li>Cypress 15.7.0 (modo headless via <code>cypress/included</code> no container).</li> <li>Node.js (pipeline usa Node 20).</li> <li>Mochawesome + mochawesome-merge + mochawesome-report-generator para relat\u00f3rios.</li> <li>Docker e Docker Compose.</li> <li>GitHub Actions para execu\u00e7\u00e3o cont\u00ednua e upload de artefatos.</li> </ul>"},{"location":"ci-cd/","title":"CI/CD","text":""},{"location":"ci-cd/#pipeline-github-actions","title":"Pipeline GitHub Actions","text":"<p>Workflow: <code>.github/workflows/api-tests.yml</code>.</p> <ul> <li>Checkout: <code>actions/checkout@v3</code>.</li> <li>Setup Node: <code>actions/setup-node@v3</code> com <code>node-version: 20</code>.</li> <li>Instala\u00e7\u00e3o: <code>npm install</code>.</li> <li>Testes: <code>npx cypress run</code>.</li> <li>Upload de artefatos: <code>actions/upload-artifact@v4</code> publica <code>cypress/results</code> com reten\u00e7\u00e3o de 5 dias.</li> </ul>"},{"location":"ci-cd/#relatorios-mochawesome-no-ci","title":"Relat\u00f3rios Mochawesome no CI","text":"<ul> <li>Configura\u00e7\u00e3o no <code>cypress.config.js</code> gera HTML e JSON em <code>cypress/results</code>.</li> <li>O passo de upload leva esses arquivos como artefato <code>api-report</code> para consulta p\u00f3s-execu\u00e7\u00e3o.</li> </ul>"},{"location":"docker/","title":"Docker","text":""},{"location":"docker/#dockerfile","title":"Dockerfile","text":"<ul> <li>Base <code>cypress/included:15.7.0</code> j\u00e1 cont\u00e9m browsers e bin\u00e1rio do Cypress.</li> <li><code>WORKDIR /app</code> define diret\u00f3rio de trabalho.</li> <li>Copia <code>package.json</code> e <code>package-lock.json</code> e roda <code>npm install</code> para depend\u00eancias.</li> <li>Copia todo o projeto para o container.</li> <li><code>CMD [\"tail\", \"-f\", \"/dev/null\"]</code> mant\u00e9m o container ativo para execu\u00e7\u00e3o manual dos testes.</li> </ul>"},{"location":"docker/#docker-composeyml","title":"docker-compose.yml","text":"<ul> <li>Servi\u00e7o <code>api-tests</code> com <code>container_name: desafioqa_api</code>.</li> <li>Build a partir do contexto atual.</li> <li><code>working_dir: /app</code> e volume bind <code>.:/app</code> para refletir mudan\u00e7as locais.</li> <li><code>entrypoint: [\"tail\", \"-f\", \"/dev/null\"]</code> igual ao Dockerfile para permitir <code>docker exec</code>.</li> </ul>"},{"location":"docker/#rodando-o-cypress-no-container","title":"Rodando o Cypress no container","text":"<pre><code>docker compose up -d\ndocker exec -it desafioqa_api bash\nnpx cypress run\n</code></pre> <p>Os relat\u00f3rios s\u00e3o gravados em <code>cypress/results</code> dentro do volume montado.</p>"},{"location":"project-structure/","title":"Estrutura do Projeto","text":""},{"location":"project-structure/#visao-geral","title":"Vis\u00e3o geral","text":"<pre><code>cypress/\n\u251c\u2500 e2e/\n\u2502  \u2514\u2500 breeds/\n\u2502     \u251c\u2500 breedsImages.cy.js\n\u2502     \u251c\u2500 breedsInvalid.cy.js\n\u2502     \u251c\u2500 breedsList.cy.js\n\u2502     \u2514\u2500 randomImage.cy.js\n\u251c\u2500 fixtures/\n\u2502  \u2514\u2500 breeds.json\n\u251c\u2500 support/\n\u2502  \u251c\u2500 commands.js\n\u2502  \u2514\u2500 e2e.js\n\u251c\u2500 e2e/helpers/\n\u2502  \u2514\u2500 api.js\nDockerfile\ndocker-compose.yml\ncypress.config.js\npackage.json\n.github/workflows/api-tests.yml\n</code></pre>"},{"location":"project-structure/#pastas-e-arquivos","title":"Pastas e arquivos","text":"<ul> <li><code>cypress/e2e/breeds/*.cy.js</code>: specs organizadas por endpoint da Dog CEO API.</li> <li><code>cypress/e2e/helpers/api.js</code>: encapsula URLs base e fun\u00e7\u00f5es <code>cy.request</code> (<code>listBreeds</code>, <code>breedImages</code>, <code>randomImage</code>).</li> <li><code>cypress/fixtures/breeds.json</code>: exemplos de ra\u00e7as v\u00e1lidas e inv\u00e1lidas usados como dados de apoio.</li> <li><code>cypress/support/e2e.js</code>: ponto de entrada para comandos customizados (importa <code>commands.js</code>, atualmente vazio para futuras extens\u00f5es).</li> <li><code>cypress.config.js</code>: configura reporter Mochawesome, diret\u00f3rio de resultados (<code>cypress/results</code>), spec pattern e arquivo de suporte.</li> <li><code>Dockerfile</code> e <code>docker-compose.yml</code>: ambiente containerizado baseado em <code>cypress/included</code>.</li> <li><code>.github/workflows/api-tests.yml</code>: pipeline GitHub Actions para execu\u00e7\u00e3o e publica\u00e7\u00e3o dos relat\u00f3rios.</li> </ul>"},{"location":"project-structure/#funcao-do-apijs","title":"Fun\u00e7\u00e3o do <code>api.js</code>","text":"<p>Centraliza chamadas HTTP para a Dog CEO API com <code>cy.request</code>, evitando repeti\u00e7\u00e3o de URLs e endpoints nas specs: - <code>listBreeds()</code>: GET <code>/breeds/list/all</code>. - <code>breedImages(breed)</code>: GET <code>/breed/{breed}/images</code>. - <code>randomImage()</code>: GET <code>/breeds/image/random</code>.</p>"},{"location":"project-structure/#relatorios","title":"Relat\u00f3rios","text":"<ul> <li>Sa\u00edda configurada em <code>cypress/results</code> (HTML e JSON) via Mochawesome.</li> </ul>"},{"location":"results/","title":"Resultados","text":""},{"location":"results/#resultados-esperados","title":"Resultados esperados","text":"<ul> <li>Sucesso nos endpoints v\u00e1lidos:</li> <li><code>/breeds/list/all</code> retorna 200 e objeto com ra\u00e7as (incluindo <code>hound</code>, <code>akita</code>, <code>retriever</code>).</li> <li><code>/breeds/image/random</code> retorna 200 e URL de imagem.</li> <li><code>/breed/hound/images</code> retorna 200 e array de URLs.</li> <li>Erro controlado:</li> <li><code>/breed/xpto123/images</code> retorna 404 com status <code>error</code> e mensagem contendo <code>Breed not found</code>.</li> </ul>"},{"location":"results/#como-ler-o-relatorio-mochawesome","title":"Como ler o relat\u00f3rio Mochawesome","text":"<ul> <li>Ap\u00f3s <code>npx cypress run</code>, abra <code>cypress/results/*.html</code> no navegador.</li> <li>Cada spec mostra casos, asserts e erros. Os arquivos <code>.json</code> correspondentes permitem agrega\u00e7\u00e3o via <code>mochawesome-merge</code>/<code>marge</code> se necess\u00e1rio.</li> </ul>"},{"location":"results/#comportamento-da-api-dog-ceo","title":"Comportamento da API Dog CEO","text":"<ul> <li>API p\u00fablica, sem autentica\u00e7\u00e3o.</li> <li>Respostas podem variar em quantidade de imagens ou URLs, mas estrutura e c\u00f3digos de status devem permanecer consistentes.</li> </ul>"},{"location":"results/#observacoes-importantes","title":"Observa\u00e7\u00f5es importantes","text":"<ul> <li>Depend\u00eancia externa: instabilidade ou rate limits da Dog CEO API podem causar falhas transit\u00f3rias.</li> <li>Execu\u00e7\u00f5es em rede restrita podem precisar de acesso outbound liberado para <code>https://dog.ceo/api</code>.</li> </ul>"},{"location":"setup/","title":"Setup","text":""},{"location":"setup/#requisitos","title":"Requisitos","text":"<ul> <li>Node.js (pipeline referencia Node 20; vers\u00f5es atuais do LTS funcionam).</li> <li>npm.</li> <li>Docker e Docker Compose para execu\u00e7\u00e3o containerizada.</li> </ul>"},{"location":"setup/#instalar-dependencias","title":"Instalar depend\u00eancias","text":"<pre><code>npm install\n</code></pre>"},{"location":"setup/#executar-testes-localmente","title":"Executar testes localmente","text":"<pre><code>npx cypress run\n</code></pre> <p>Relat\u00f3rios s\u00e3o gravados em <code>cypress/results</code> conforme <code>cypress.config.js</code>.</p>"},{"location":"setup/#executar-via-docker","title":"Executar via Docker","text":"<ol> <li>Build da imagem:    <code>bash    docker compose build --no-cache</code></li> <li>Subir o container em background:    <code>bash    docker compose up -d</code></li> <li>Entrar no container e rodar os testes:    <code>bash    docker exec -it desafioqa_api bash    npx cypress run</code></li> </ol>"},{"location":"setup/#relatorios-mochawesome","title":"Relat\u00f3rios Mochawesome","text":"<ul> <li>Diret\u00f3rio de sa\u00edda: <code>cypress/results</code>.</li> <li>Configurado em <code>cypress.config.js</code> com gera\u00e7\u00e3o de <code>.html</code> e <code>.json</code>.</li> </ul>"},{"location":"tests/","title":"Testes","text":""},{"location":"tests/#lista-de-racas-breedslistcyjs","title":"Lista de ra\u00e7as \u2013 <code>breedsList.cy.js</code>","text":"<p>Valida <code>/breeds/list/all</code> retornando status 200, status <code>success</code> e objeto com ra\u00e7as conhecidas.</p> <pre><code>import { api } from \"../helpers/api\";\n\ndescribe(\"\ud83d\udc36 GET /breeds/list/all\", () =&gt; {\n  it(\"Deve retornar todas as ra\u00e7as com status 200 e no formato correto\", () =&gt; {\n    api.listBreeds().then((response) =&gt; {\n      expect(response.status).to.eq(200);\n      expect(response.body.status).to.eq(\"success\");\n      expect(response.body.message).to.be.an(\"object\");\n      expect(response.body.message).to.have.property(\"hound\");\n      expect(response.body.message).to.have.property(\"akita\");\n      expect(response.body.message).to.have.property(\"retriever\");\n    });\n  });\n});\n</code></pre> <p>Valida\u00e7\u00f5es: status HTTP, chave <code>status</code>, tipo do <code>message</code> como objeto e presen\u00e7a de ra\u00e7as populares.</p>"},{"location":"tests/#imagem-aleatoria-randomimagecyjs","title":"Imagem aleat\u00f3ria \u2013 <code>randomImage.cy.js</code>","text":"<p>Garante que <code>/breeds/image/random</code> retorna status 200, status <code>success</code> e uma URL v\u00e1lida.</p> <pre><code>describe(\"\ud83d\udcf8 GET /breeds/image/random\", () =&gt; {\n  it(\"Deve retornar uma imagem aleat\u00f3ria v\u00e1lida\", () =&gt; {\n    api.randomImage().then((response) =&gt; {\n      expect(response.status).to.eq(200);\n      expect(response.body.status).to.eq(\"success\");\n      expect(response.body.message).to.match(/^https?:\\/\\/.+/);\n    });\n  });\n});\n</code></pre> <p>Valida\u00e7\u00f5es: c\u00f3digo de resposta e regex para garantir que o <code>message</code> \u00e9 uma URL http/https.</p>"},{"location":"tests/#imagens-de-uma-raca-especifica-breedsimagescyjs","title":"Imagens de uma ra\u00e7a espec\u00edfica \u2013 <code>breedsImages.cy.js</code>","text":"<p>Verifica <code>/breed/{breed}/images</code> para a ra\u00e7a <code>hound</code>, esperando array de URLs v\u00e1lidas.</p> <pre><code>const breed = \"hound\";\n\ndescribe(\"\ud83d\udc15 GET /breed/{breed}/images\", () =&gt; {\n  it(`Deve retornar imagens da ra\u00e7a ${breed}`, () =&gt; {\n    api.breedImages(breed).then((response) =&gt; {\n      expect(response.status).to.eq(200);\n      expect(response.body.status).to.eq(\"success\");\n      expect(response.body.message).to.be.an(\"array\");\n      response.body.message.forEach((img) =&gt; {\n        expect(img).to.match(/^https?:\\/\\/.+/);\n      });\n    });\n  });\n});\n</code></pre> <p>Valida\u00e7\u00f5es: status HTTP, chave <code>status</code>, tipo do <code>message</code> como array e verifica\u00e7\u00e3o de URL para cada item.</p>"},{"location":"tests/#cenario-invalido-breedsinvalidcyjs","title":"Cen\u00e1rio inv\u00e1lido \u2013 <code>breedsInvalid.cy.js</code>","text":"<p>Confirma tratamento de erro quando a ra\u00e7a n\u00e3o existe (<code>xpto123</code>), sem usar helper para explicitar a URL inv\u00e1lida.</p> <pre><code>const invalidBreed = \"xpto123\";\n\ndescribe(\"\u274c GET /breed/{breed}/images com ra\u00e7a inv\u00e1lida\", () =&gt; {\n  it(\"Deve retornar mensagem de erro para ra\u00e7a inexistente\", () =&gt; {\n    cy.request({\n      url: `https://dog.ceo/api/breed/${invalidBreed}/images`,\n      failOnStatusCode: false\n    }).then((response) =&gt; {\n      expect(response.status).to.eq(404);\n      expect(response.body.status).to.eq(\"error\");\n      expect(response.body.message).to.contain(\"Breed not found\");\n    });\n  });\n});\n</code></pre> <p>Valida\u00e7\u00f5es: status 404, status de payload <code>error</code> e mensagem contendo <code>Breed not found</code>.</p>"},{"location":"tests/#uso-dos-endpoints","title":"Uso dos endpoints","text":"<ul> <li><code>/breeds/list/all</code>: lista completa para garantir disponibilidade da taxonomia.</li> <li><code>/breeds/image/random</code>: fluxo principal de imagem aleat\u00f3ria.</li> <li><code>/breed/{breed}/images</code>: consulta parametrizada; usado tanto para ra\u00e7a v\u00e1lida (<code>hound</code>) quanto para inv\u00e1lida (<code>xpto123</code>).</li> </ul>"}]}